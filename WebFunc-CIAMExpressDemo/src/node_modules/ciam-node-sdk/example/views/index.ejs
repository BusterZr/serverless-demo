<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Serverless Express.js 应用"/>
    <meta name="keywords" content="express,express.js,serverless,无服务"/>
    <title>Serverless - Express.js</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <style lang="css">
      h1 {
        text-align: center;
        width: 600px;
        margin: 300px auto;
      }
    </style>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.cjs.min.js"></script> -->

    <script src="../../../ciam-js-sdk/dist/ciam-js-sdk.cjs.development.js" ></script>
    <script src="../../../ciam-spa-sdk/dist/ciam-spa-sdk.cjs.development.js"></script>
    <script>
     const spaClient = new window['ciam-spa-sdk'].SpaClient({
      // clientId: 'NDY3YzZmMjExYmRlNDhkZWI5ODA4NjNkMGIyOGU4MWY',
      // userDomain: 'https://abc123.beta.tencentciam.com',
      // redirectUri: 'https://try.auth.beta.tencentciam.com' || window.location.origin,
      // logoutRedirectUrl: 'https://baidu.com',
      // scopes: ['openid'],
      clientId: "MDQ1ZmY4OTFkODE3NGEwYmJhNTJmYjY5YTRlNzcyNWY", 
  clientSecret: 'Tgi9mcKYEzWBA2pKYnxg671qtTyjcfHB',
  userDomain: "https://shingao.portal.tencentciam.com", 
  redirectUri: "https://service-o4u73cst-1253509498.sh.apigw.tencentcs.com/release/callback",
  logoutRedirectUrl: "https://service-o4u73cst-1253509498.sh.apigw.tencentcs.com/release/",
  scopes: ['openid'],
    });
    console.log('authorize', spaClient.isAuthenticated())
    </script>
  </head>
  <body>
    <h1>
      欢迎访问 Express.js 应用
      <br />
      <a href="https://cloud.tencent.com/product/scf" target="_blank" rel="noopener noreferrer">
        腾讯云 Serverless
      </a>
      为您提供服务
    </h1>
    <div class="ciam-login">
      用户当前状态：<%= isLogin ? '已登录' : '未登录' %>
      <% if (!isLogin) { %>
        <a href="/login">登录</a>
      <% } else { %>
        <a href="/logout">退出</a>
        <div>
          <a href="/userinfo">查看用户信息</a>
        </div>
      <% } %>
    </div>
  </body>
</html>

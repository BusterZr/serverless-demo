"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createLogoutApi = void 0;
require("../types");
function createLogoutApi({ appDomain, redirectUri }) {
    return function handler(req, res) {
        var _a, _b;
        const { redirect } = req.query;
        if (redirect) {
            const params = new URLSearchParams({
                redirect_uri: redirectUri
            });
            res.redirect(302, `${appDomain}/login/profile/logout?${params.toString()}`);
            return;
        }
        (_b = (_a = req.session) === null || _a === void 0 ? void 0 : _a.destroy) === null || _b === void 0 ? void 0 : _b.call(_a);
        res.redirect(302, `${req.url}?redirect=true`);
    };
}
exports.createLogoutApi = createLogoutApi;
